<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description"
          content="piStar is an online Goal Modeling tool, compliant with iStar 2.0. Useful for creating diagrams for requirements documents.">
    <meta name="author" content="JoÃ£o Pimentel">
    <link rel="icon" href="images/favicon.ico">

    <title>piStar tool - Goal Modeling</title>

    <!-- bootstrap styles -->
    <link href="lib/bootstrap/bootstrap.min.css" rel="stylesheet">  <!-- Bootstrap core CSS -->

    <!-- library-specific styles -->
    <link rel="stylesheet" href="istarcore/lib/joint.min.css"/> <!-- joint js -->
    <link href="lib/bootstrap3-editable/css/bootstrap-editable.css" rel="stylesheet"> <!-- x-editable -->

    <!-- custom styles -->
    <link rel="stylesheet" href="pistar.css"/>
</head>

<body>

<nav class="navbar navbar-default navbar-fixed-top navbar-xs">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar"
                    aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span
                    class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button>
            <a class="navbar-brand" href="#">piStar</a>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
            <ul class="nav navbar-nav">
                <li id="examplesButton"><a href="#examplesArea" aria-controls="examplesArea" aria-expanded="false"
                                           data-toggle="collapse" title="Open some pre-loaded examples.">Examples</a>
                </li>
                <li id="helpButton"><a href="#helpArea" aria-controls="helpArea" aria-expanded="false"
                                       data-toggle="collapse"
                                       title="Don't worry, you won't loose your model if you click here.">Help</a></li>
            </ul>
        </div><!--/.nav-collapse -->
    </div>
</nav>

<div id="examplesArea" class="collapse container">
    <div class="well">
        <em>Loading may take a while, please wait a few seconds after clicking in an example below:</em>
        <ul>
            <li><a href="#examplesArea" onclick="examples.smallExample();" aria-controls="examplesArea"
                   data-toggle="collapse">Small Example</a></li>
            <li><a href="#examplesArea" onclick="examples.travelReimbursement();" aria-controls="examplesArea"
                   data-toggle="collapse">Travel Reinbursement</a></li>
        </ul>
    </div>
</div>

<div id="helpArea" class="collapse container">
    <div class="well">
        <ul>
            <li>Press <kbd>F11</kbd> to use the tool in fullscreen</li>
            <li>To change the name of an element: double-click it.</li>
            <li>To collapse/expand an actor/role/agent, press <kbd>ctrl</kbd> and click it.</li>
            <li>To add an actor/role/agent in the diagram: click on the ACTOR... button, select the respective option,
                and then click on the diagram.
            </li>
            <li>To add a goal/task/resource/quality in the diagram: click on the respective button and then click on the
                diagram. (OBS: all elements must be inside an actor/role/agent)
            </li>
            <li>To add a refinement/qualification/needed-by link: click on the respective link button, then click on the
                source element, and lastly click on the target element.
            </li>
            <li>To add a contribution link: click on the CONTRIBUTION... button, select the respective label, then click
                on the source element, and lastly click on the target element.
            </li>
            <li>To add a dependency link: click on the DEPENDENCY... button, select the respective dependency type, then
                click on the source element (in the depender), and lastly click on the target element (on the dependee).
            </li>
            <li>To add an is-a/participates-in link: click on the ACTOR LINK... button, select the respective option,
                then click on the source, and lastly click on the target.
            </li>
            <li>To delete an element: click on the element, then press the <kbd>delete</kbd> key.</li>
            <li>To delete a dependency: click on its dependum, then press the <kbd>delete</kbd> key.</li>
            <li>To delete a link: point the mouse over the link, then click on its <em>'X'</em> symbol.</li>
            <li>To add a property to an element: click on the element, then click on the <em>Add Property</em> button in
                the panel below the diagram.
            </li>
            <li>TIP: You can use your browser's zoom options (try pressing <kbd>ctrl</kbd> and scrolling your mouse
                wheel).
            </li>
            <li>You can change the diagram size and other visualization options with <em>Diagram Options</em></li>
        </ul>
        For help with the iStar 2 language, please visit <em><a href="https://sites.google.com/site/istarlanguage/"
                                                                target="blank">https://sites.google.com/site/istarlanguage/</a></em><br/>
        For more info on this project, please visit the <a href="https://github.com/jhcp/piStar/" target="blank">piStar
        repository</a>.<br/>
        <em>piStar tool version 1.0.1</em>
    </div>
</div>

<div id="addToolbar" class="container-fluid">
    <div class="row">
        <strong>&nbsp;&nbsp;ADD: </strong>

        <span class="dropdown">
            <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenuActor" data-toggle="dropdown"
                    aria-haspopup="true" aria-expanded="true" title="Add Role, Agent, or Actor">
                <img src="images/Actor.svg" height="25px"/><br/>
                Actor...
                <span class="caret"></span>
            </button>
            <ul id="addActorDropdown" class="dropdown-menu" aria-labelledby="dropdownMenuActor"></ul>
        </span>

        <span class="dropdown">
            <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenuActorLink"
                    data-toggle="dropdown" aria-haspopup="true" aria-expanded="true"
                    title="Add is-a or participates-in link between actors">
                <img src="images/IsALink.svg" height="25px"/><br/>
                Actor links...
                <span class="caret"></span>
            </button>
            <ul id="addActorLinkDropdown" class="dropdown-menu" aria-labelledby="dropdownMenuActorLink"></ul>
        </span>

        <span class="dropdown">
            <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenuDependencyLink"
                    data-toggle="dropdown" aria-haspopup="true" aria-expanded="true" title="Add dependency link">
                <img src="images/DependencyLink.svg" height="25px"/><br/>
                Dependency...
                <span class="caret"></span>
            </button>
            <ul id="addDependencyDropdown" class="dropdown-menu" aria-labelledby="dropdownMenuDependencyLink"></ul>
        </span>

        <span class="dropdown">
            <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenuContributionLink"
                    data-toggle="dropdown" aria-haspopup="true" aria-expanded="true"
                    title="Add contribution link (make, help, hurt or break)">
                <img src="images/ContributionLink.svg" height="25px"/><br/>
                Contribution...
                <span class="caret"></span>
            </button>
            <ul id="addContributionDropdown" class="dropdown-menu" aria-labelledby="dropdownMenuContributionLink"></ul>
        </span>

        <span id="addToolbarButtons"></span>
        <div>
            <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                <i id="status"></em>
            </span>
        </div>

    </div>
</div>

<div id="diagramBoxOuter">
    <div id="diagramBoxInner">
        <div id="diagram"></div>
    </div>
</div>


<div class="container-fluid toolbar" id="extraOptions">
    <div class="row">
        <div id="propertiesPanel" class="col-md-8">
            <table class="table table-bordered table-condensed" id="propertyTable">
                <thead>
                <tr>
                    <th>Property</th>
                    <th>Value</th>
                </tr>
                </thead>
                <tbody>
                </tbody>
            </table>
            <div id="cellButtons">
            </div>
        </div>

        <div id="appToolbar" class="col-md-3">
            <button type="button" id="saveImageButton"><span class="glyphicon glyphicon-picture"
                                                             aria-hidden="true"></span> Save Image
            </button>
            <span id="saveImage" class="toolbarGroup"></span>

            <button type="button" id="saveModelButton"><span class="glyphicon glyphicon-floppy-save"
                                                             aria-hidden="true"></span> Save Model
            </button>
            <span id="saveModel" class="toolbarGroup"></span>

            <button type="button" id="loadModelButton" data-toggle="modal" data-target="#loadModelModal"
                    title="Load a goal model from a JSON file created with this tool"><span
                    class="glyphicon glyphicon-floppy-open" aria-hidden="true"></span> Load model
            </button>
            <button type="button" id="diagramOptionsModalButton" data-toggle="modal" data-target="#diagramOptions"
                    title="Change diagram settings"><span class="glyphicon glyphicon-blackboard"
                                                          aria-hidden="true"></span> Diagram options
            </button>
            <button type="button" id="clearButton"><span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
                Clear
            </button>

        </div>
    </div>
</div>

<!-- backbone templates -->
<script type="text/template" id="addButtonTemplate">
    <button type="button" class="btn btn-default" id="add<%- label %>" title="<%- tooltip %>"><img
            src="images/<%- name %>.svg" height="25px"/><br/><%- label %>
    </button>
</script>

<script type="text/template" id="addDropdownButtonTemplate">
    <a id="add<%- label %>" title="<%- tooltip %>" href="#"><img src="images/<%- name %>.svg" height="35px"/> <%- label
        %></a>
</script>


<script type="text/template" id="propertyTemplate">
    <tr>
        <td class="propertyName"><%- propertyName %></td>
        <td class="propertyValue">
            <a href="#" id="current<%- propertyName %>" class="propertyValue" data-type="text" data-pk="1"
               data-name="<%- propertyName %>" data-title="Enter <%- propertyName %>"><%- propertyValue %></a>
        </td>
    </tr>
</script>

</div>


<div id="modals">

    <div class="modal fade" id="loadModelModal" tabindex="-1" role="dialog" aria-labelledby="loadModelModalLabel">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                            aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="loadModelModalLabel">Load i* model from JSON</h4>
                </div>
                <div class="modal-body">
                    <input type="file" id="actualFileInput" name="file"/>
                    <br/>
                    <p>Or paste the content of your model into the textarea below.</p>
                    <textarea id="loadModelContent" autofocus="" rows="10" cols="50"></textarea>
                </div>
                <div class="modal-footer">
                    <button id="loadButton" type="button" class="btn btn-primary" data-loading-text="Loading...">Load
                        model
                    </button>
                    <button type="button" class="btn" data-dismiss="modal">Close</a>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="diagramOptions" tabindex="-1" role="dialog" aria-labelledby="diagramOptionsLabel">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                            aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="loadModelModalLabel">Change Diagram Options</h4>
                </div>
                <div class="modal-body">
                    <div class="panel panel-default">
                        <div class="panel-body">
                            <label for="diagramWidthInput">Width</label>
                            <input id="diagramWidthInput" type="text" autofocus=""> px
                            <br/>
                            <label for="diagramWidthInput">Height</label>
                            <input id="diagramHeightInput" type="text"> px
                            <br/>
                            <button id="diagramSizeButton" type="button">Apply</button>
                        </div>
                    </div>
                    <div class="panel panel-default">
                        <div class="panel-body">
                            <p>
                                <button id="preciseLinksButton" type="button">
                                    <span class="glyphicon glyphicon-screenshot" aria-hidden="true"></span> Fix links
                                    spacing
                                </button>
                                <em>Remove gaps between links and elements, recommended to apply before saving an image.
                                    It may take some seconds.</em>
                            </p>
                            <p>
                                <button id="whiteActorsButton" type="button">
                                    <span class="glyphicon glyphicon-unchecked" aria-hidden="true"></span> Blank actors
                                </button>
                                <em>Turn white the background color of the boundaries of existing actors.</em>
                            </p>
                        </div>
                    </div>

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

</div>
</body>

<!-- dependencies -->
<script src="istarcore/lib/jquery.min.js"></script>
<script src="istarcore/lib/lodash.min.js"></script>
<script src="istarcore/lib/backbone.min.js"></script>

<script src="istarcore/lib/joint.min.js"></script>
<script src="lib/bootstrap/bootstrap.min.js"></script>

<script src="lib/bootstrap3-editable/js/bootstrap-editable.min.js" type="text/javascript"></script>

<!-- istar core -->
<script src="js/istarcore.shapes.js"></script>
<script src="istarcore/istarcore.metamodel.js"></script>
<script src="istarcore/istarcore.js"></script>
<script src="istarcore/metamodel.js"></script>

<!-- tool specific -->
<script src="istarcore/fileManager.js"></script>
<script src="js/models/addButton.js"></script>
<script src="js/views/addButton.js"></script>
<script src="js/views/addButtonDropdownItem.js"></script>
<script src="js/views/propertiesTable.js"></script>
<script src="js/ui.js"></script>
<script src="js/examples.js"></script>

<!-- insert your plugin(s) here, after this line -->

<!-- end of plugin(s) area -->

<script src="js/main.js"></script>
</html>
